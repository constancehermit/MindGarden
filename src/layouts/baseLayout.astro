---
import BaseHead from "../components/layout/BaseHead.astro";
import Footer from "../components/layout/Footer.astro";
import Header from "../components/layout/Header.astro";
import Drawer from "../components/ui/Drawer.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts.ts";
import "../styles/global.css";
import "@fontsource/quicksand";
import "@fontsource/delius";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <script is:inline>
      function initTheme() {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.classList.toggle("dark", saved === "dark");
        } else {
          const prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)",
          ).matches;
          document.documentElement.classList.toggle("dark", prefersDark);
        }
      }
      try {
        initTheme();
      } catch (e) {
        console.error("Theme initialization failed:", e);
      }
    </script>
  </head>
  <body class="bg-theme-img">
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:bg-white focus:text-black focus:p-2 focus:rounded"
    >
      Skip to main content
    </a>
    <div class="min-h-screen w-screen">
      <div class="max-w-7xl mx-auto">
        <Header />
        <main id="main-content" aria-label="Main content">
          <slot />
        </main>
        <Footer />
      </div>
    </div>
    <Drawer />
  </body>
</html>

<script>
  import "@tailwindplus/elements";
</script>
